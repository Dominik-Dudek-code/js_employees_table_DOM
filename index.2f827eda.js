function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],l=!0,i=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(i)throw r}}return o}}(e,t)||r(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||r(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,n)}}var a=document.querySelector("table"),o=document.querySelector("tbody"),l=document.querySelector("thead");l.style.userSelect="none",o.style.userSelect="none";for(var i=0,c=0;c<a.rows.length;c++){var s=a.rows[c].insertCell(0);if(i=a.rows.length-1,0===c||c===a.rows.length-1){var u=document.createElement("th");s.replaceWith(u),u.textContent="ID"}c!==a.rows.length-1&&0!==c&&(s.textContent=c)}var d={lastClickedCell:null,sortOrder:"asc",get sortingName(){return this.lastClickedCell},set sortingName(value){return this.lastClickedCell=value.textContent.toLowerCase()}},f={};function m(e,t,r){var a=f[t],o=n(e.rows).sort(function(e,n){var o,l=e.cells[a].textContent,i=n.cells[a].textContent;switch(t){case"age":case"id":o=l-i;break;case"salary":o=v(l)-v(i);break;default:o=l.localeCompare(i)}return"asc"===r?o:-o});e.replaceChildren.apply(e,n(o))}function v(e){return Number(e.replace(/[,$]/g,""))}l.querySelectorAll("th").forEach(function(e,t){f[e.textContent.trim().toLowerCase()]=t}),a.addEventListener("click",function(e){if("TH"===e.target.nodeName&&null!==e.target.closest("thead")){var t=e.target.textContent.toLowerCase();t===d.lastClickedCell?d.sortOrder="asc"===d.sortOrder?"desc":"asc":d.sortOrder="asc",m(o,t,d.sortOrder),d.sortingName=e.target}});var y=null;function p(){if(y){var e=y.querySelector(".delete-button");e&&(e.classList.remove("active"),e.style.zIndex="-1",setTimeout(function(){return e.remove()},200),y.classList.remove("active"),y=null)}}document.addEventListener("click",function(e){var t=e.target.closest("tr");if(!e.target.closest(".modal")){if(!t||"TBODY"!==t.parentElement.tagName){p();return}if(y!==t){p(),(y=t).classList.add("active");var n=document.createElement("span");n.textContent="✖️",n.className="delete-button",n.addEventListener("click",function(e){e.stopPropagation();var r=document.querySelector(".modal");r.classList.remove("hidden"),r.addEventListener("click",function(e){"Yes"===e.target.textContent&&(e.stopPropagation(),r.classList.add("hidden"),n.style.zIndex="-1",n.classList.remove("active"),setTimeout(function(){t.remove(),y=null},200),setTimeout(function(){w("success","Succesfully deleted employee!")},200)),"No"===e.target.textContent&&r.classList.add("hidden")},{once:!0})}),t.appendChild(n),setTimeout(function(){return n.classList.add("active")},0),setTimeout(function(){y===t&&(n.style.zIndex="1")},250)}}});var h=document.createElement("form");h.classList.add("new-employee-form"),document.body.appendChild(h);var C=["Tokyo","Singapore","London","New York","Edinburgh","San Francisco"];function b(e){return"age"===e||"salary"===e?"number":"office"===e?"select":"text"}function g(e){return e.split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" ")}!function(){for(var e in f){var t=b(e);if("id"!==e){if("select"===t){!function(e,t){var n=document.createElement("select"),r=document.createElement("label");r.textContent=g(e)+":",n.name=e,n.dataset.qa=e,t.forEach(function(e){var t=document.createElement("option");t.value=e,t.textContent=e,n.appendChild(t)}),r.appendChild(n),h.appendChild(r)}(e,C);continue}!function(e,t){var n=document.createElement("label"),r=document.createElement("input");n.textContent=g(e)+":",r.type=t,r.name=e,r.dataset.qa=e,n.appendChild(r),h.appendChild(n)}(e,t)}}}();var x=document.createElement("button");function w(e,t){var n=document.querySelector(".notification");n&&document.body.removeChild(n);var r=document.createElement("div"),a=document.createElement("h2"),o=document.createElement("p");r.dataset.qa="notification",r.classList.add("notification"),r.appendChild(a),r.appendChild(o),o.textContent=t,a.textContent="".concat(g(e)," message:"),r.classList.add(e),document.body.appendChild(r),setTimeout(function(){document.body.contains(r)&&document.body.removeChild(r)},5e3)}function E(e,t){if("name"===e||"position"===e){if(t.length<4)return w("error","".concat(g(e)," should be at least 4 letters long!")),!0;if(t.length>40)return w("error","".concat(g(e)," can't be that long!")),!0;if(!/^[a-zA-Z]+(?: [a-zA-Z]+)*$/.test(e))return w("error","".concat(g(e)," should contain letters, with only one space between words!")),!0}if("age"===e){if(isNaN(Number(t)))return w("error","Age should contain only numbers!"),!0;if(18>Number(t)||Number(t)>90)return w("error","Age should be between 18 and 90 years!"),!0}return!1}function S(e){return"$".concat(Number(e).toLocaleString("en-US"))}x.type="submit",x.textContent="Save to table",h.appendChild(x),h.addEventListener("submit",function(e){e.preventDefault();var n=new FormData(h),r=!1,a="",l=!0,c=!1,s=void 0;try{for(var u,v=n[Symbol.iterator]();!(l=(u=v.next()).done);l=!0){var y=t(u.value,2),p=y[0];y[1].trim()||(r=!0,a+="".concat(p," "))}}catch(e){c=!0,s=e}finally{try{l||null==v.return||v.return()}finally{if(c)throw s}}if(r){var C=function(e){var t=e.split(" ");if(1===t.length)return"".concat(t[0]," is");if(2===t.length)return"".concat(t[0]," and ").concat(t[1]," are");var n=t.slice(0,-1).join(", "),r=t[t.length-1];return"".concat(n," and ").concat(r," are")}(a.trim());w("error","Failed because ".concat(C," empty, please enter correct value to inputs!"));return}var b=!0,x=!1,L=void 0;try{for(var k,N=n[Symbol.iterator]();!(b=(k=N.next()).done);b=!0){var A=t(k.value,2),T=A[0],q=A[1];if(E(T,q))return}}catch(e){x=!0,L=e}finally{try{b||null==N.return||N.return()}finally{if(x)throw L}}w("success","New employee has been added to the table!");var I={};for(var O in f)I[O]=n.get(O);(function(e){var n=o.insertRow();Object.entries(e).forEach(function(e){var r=t(e,2),a=r[0],o=r[1],l=n.insertCell();if("id"===a&&(l.textContent=i,i++),"string"==typeof o&&(l.textContent=g(o.trim())),"salary"===a){var c=S(o);l.textContent=c}})})(I),d.lastClickedCell&&m(o,d.lastClickedCell,d.sortOrder),h.reset()});var L=!1;o.addEventListener("dblclick",function(e){var t,n=e.target.closest("td");if(n&&n.parentElement===y&&!L){var r=n.cellIndex;for(var a in f)"id"===a&&(t=f[a]);if(r!==t){var o,l,i=n.textContent;n.textContent="";var c=window.getComputedStyle(n),s=c.width,u=c.height,d=n.cellIndex;for(var m in f)if(f[m]===d){d=m;break}var v=(o=d,l=b(d),document.querySelector("".concat("select"===l?"select":"input",'[name="').concat(o,'"]')).cloneNode(!0));v.className="cell-input",v.style.height=u,v.style.width=s,v.value=i,"salary"===d&&(v.value=i.slice(1).split(",").join("")),n.appendChild(v),L=!0,v.focus(),v.addEventListener("blur",function(){L=!1,n.innerHTML="";var e=v.value;if(e.length<=0){n.textContent=i,w("warning","Failed, no data passed.");return}if(E(d,e)){n.textContent="salary"===d?S(e):i;return}if("salary"===d){n.textContent=S(e);return}if("text"===b(d)){n.textContent=g(v.value);return}n.textContent=v.value}),v.addEventListener("keydown",function(e){"Enter"===e.key&&v.blur()})}}});
//# sourceMappingURL=index.2f827eda.js.map
